<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
    	<title>Small Quotes Project</title>	
    	<meta name="description" content=""/>
<meta property="og:title" content="Small Quotes Project" />
<meta property="og:url" content="quotes-project.html"/>
<meta property="og:description" content=" " />
<meta property="og:type" content="article" />
<meta property="og:author" content="Dylan" />
    	<link rel="stylesheet" type="text/css" href="./theme/css/default.css"/>
        <link rel="stylesheet" type="text/css" href="./theme/css/pygment.css"/>
	</head>
	<body id="background">
		<div id="main"> 

		<a href="."><img class="headerstretch" src="./theme/images/banner.png" alt = "banner"/></a>
		<div id="nav">
    			<div class="navb"><p><a href="./" class="navb">Home</a></p></div>
    			<div class="navb"><p><a href="./pages/about.html" class="navb">About</a></p></div>
    			<div class="navb"><p><a href="./pages/projects.html" class="navb">Projects</a></p></div>
    			<div class="navb"><p><a href="./archives.html" class="navb">Archives</a></p></div>
    			<a class="icon" href="http://steamcommunity.com/id/Dylan531"><img src="./theme/images/thmb/steam.png" alt = "steam"/></a>
    			<a class="icon" href="https://gist.github.com/Dylan531"><img src="./theme/images/thmb/git.png" alt = "git"/></a>
    			<a class="icon" href="/"><img src="./theme/images/thmb/twitter.png" alt = "twitter"/></a>
		</div>
            <div class = "centerarticle">
                    <h1>Small Quotes Project</h1>
    <p>One day on a whim I decided I wanted to do something with all of the quotes my friends and I had gathered. We have a page we add our
most favorite quotes onto, the page functions much like a Google Doc, where you can see everybody editing the file, as well as editing it
yourself. So what I end up with is a text file with over 500 lines of various quotes and data that cannot be properly formatted. The
first step was developing something to sort through out of it, of which I created this mess:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">fileinput</span>

<span class="n">quotes</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">fileinput</span><span class="o">.</span><span class="n">input</span><span class="p">(</span><span class="s1">&#39;quotes&#39;</span><span class="p">):</span>
    <span class="n">r_unwanted</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;[</span><span class="se">\n\t\r</span><span class="s2">]&quot;</span><span class="p">)</span>
    <span class="n">line</span> <span class="o">=</span> <span class="n">r_unwanted</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span>
    <span class="n">line</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;(^\&#39;)&quot;</span><span class="p">,</span><span class="s1">&#39;</span><span class="se">\&quot;</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span>
    <span class="n">line</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;(\&#39;\s)&quot;</span><span class="p">,</span><span class="s1">&#39;</span><span class="se">\&quot;</span><span class="s1"> &#39;</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span>
    <span class="n">line</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
        <span class="k">continue</span>
    <span class="k">if</span> <span class="s1">&#39;5&#39;</span> <span class="ow">in</span> <span class="n">line</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">and</span> <span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2">&quot;</span> <span class="ow">in</span> <span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]:</span>
        <span class="k">def</span> <span class="nf">check</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span>
            <span class="k">elif</span> <span class="n">x</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">x</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">string</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
        <span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^(\&quot;.*\&quot;)&#39;</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span>
        <span class="n">match2</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\&quot;\s(.*)\s\d&#39;</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span>
        <span class="n">string1</span> <span class="o">=</span> <span class="n">check</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">check</span><span class="p">(</span><span class="n">match2</span><span class="p">):</span>
            <span class="n">string2</span> <span class="o">=</span> <span class="n">check</span><span class="p">(</span><span class="n">match2</span><span class="p">)[</span><span class="mi">2</span><span class="p">:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span> 
            <span class="k">continue</span>
        <span class="n">line</span> <span class="o">=</span> <span class="p">[</span><span class="n">string1</span><span class="p">,</span> <span class="n">string2</span><span class="p">,</span> <span class="n">line</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span>
        <span class="n">quotes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</code></pre></div>

<p>Let's start off at the for statement on line number 6. It uses the fileinput module to open the 'quotes' fine to iterate over each line. Each line goes through the series of Regex. Lines 7 and 8 remove all of the special characters, like new lines. Lines 9 and 10 replace single quotes with double quotes. Next, the line is split up at each space, turning it into a list with each word in the array. I was having problems with the first thing in the list being empty, so line number 12 checks if it's empty, and if it is, it passes and iterates over the next line. </p>
<p>The next if statement does something really hack-y, something I presume is probably bad practice. Basically, the way my friends and I format the dates, they will more than likely be at the end. So, it checks if there is a 5 at the end (for 2015), and assuming that is true, it also checks if the first character in the first word is a double quote. Only because Python treats strings as an array of characters, this is possible. </p>
<p>After that, the string is joined back together. Then, it takes what's within the double quotes, and defined that as match1. Match2 is then defined as the name of the person that said the quote, basically everything that's between the quote and the date. Lines 23-27 are hack-y checks to make sure the result isn't nul, and line 25 also removes some unwanted whitespace and excess quotations. Finally, we arrive at the result, where the quote is placed into an array with 3 rows, in this format: [Quote, Name, Date]. The result is then added to the list of the quotes as a whole. Here is an example:</p>
<p>Input: "I'm not mad, YOU'RE MAD~" Colt, 3/19/2015</p>
<p>Output: ['"I\'m not mad, YOU\'RE MAD~"', 'Colt,', '3/19/2015']</p>
<p>There are a lot of loose cases that get through, and I'm not too sure how to fix them, which is part of the reason I'm writing this blog, hopefully to brainstorm some ideas. Here something that should get through, but does not, because of a simple quirk:</p>
<p>Input: "Quote Here",, Name, 3/19/2015</p>
<p>Output: None</p>
<p>The reason that doesn't go through is because there is a comma after the second quotation instead of whitespace. The core algorithms are flawed in that they are too specific, mostly due to the fact I'm not that familiar with Regex yet. With time, I suppose. Until next time.</p>
            </div>
			<!-- Everything below this is the footer! -->
			
            <div id="footer">
                <div class="footerelement">
                    <p>&copy; 2016-2023 Dylan Cramer</p>
                </div>
                <div class="footerelement">
                    <p>Inspired by the <a href="https://www.graphene-theme.com/">Wordpress Graphene Theme</a>.</p>
                </div>
                <div class="footerelement">
                    <p>Built with <strong><a href="https://getpelican.com/">Pelican</a></strong></p>
                </div>
                
                <!-- Revamp one day? -->
                
                
                <!--
                <div id="val">
                    <p><a href="http://validator.w3.org/check?uri=referer">
                    <img src="http://www.w3.org/Icons/valid-xhtml10" alt="Valid XHTML 1.0 Strict" class="valid"  />
                    </a></p>
                </div>
                <div id="valup">
                    <p><a href="http://jigsaw.w3.org/css-validator/check/referer">
                    <img src="http://jigsaw.w3.org/css-validator/images/vcss" alt="Valid CSS!" class="valid" />
                    </a></p>
                </div>
            </div>
            -->
		</div>
	</body>
</html>